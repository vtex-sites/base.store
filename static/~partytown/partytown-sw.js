/* Partytown 0.0.29 - MIT builder.io */
const e = new Map(),
  t = (e, t) => ({ v: e.v, k: t }),
  r = (e, t, r) => {
    const n = { 'content-type': r || 'text/html', 'Cache-Control': 'no-store' }
    return (
      t && (n['Cross-Origin-Embedder-Policy'] = 'require-corp'),
      new Response(e, { headers: n })
    )
  }
;(self.oninstall = () => self.skipWaiting()),
  (self.onactivate = () => self.clients.claim()),
  (self.onmessage = (t) => {
    const r = t.data,
      n = e.get(r.v)
    n && (e.delete(r.v), clearTimeout(n[1]), n[0](r))
  }),
  (self.onfetch = (n) => {
    const s = n.request,
      o = new URL(s.url).pathname
    o.endsWith('partytown-sandbox-sw.html')
      ? n.respondWith(
          r(
            '<!DOCTYPE html><html><head><meta charset="utf-8"><script type="module">/* Partytown 0.0.29 - MIT builder.io */\n(e=>{const t=()=>!0,r=e=>e.length,n=e=>{try{return e.constructor.name}catch(e){}return""},s=(e,t)=>e.startsWith(t),o=e=>!(s(e,"webkit")||s(e,"toJSON")||s(e,"constructor")||s(e,"toString")||s(e,"_")),i=()=>Math.round(9999999999*Math.random()+4),a=new WeakMap,c=new Map,l=new Map,u={},h=new WeakMap,p=(e,t,r)=>e?e===e.window?0:"#document"===(r=e.nodeName)?1:"HTML"===r?2:"HEAD"===r?3:"BODY"===r?4:("number"!=typeof(t=a.get(e))&&m(e,t=i()),t):-1,d=(e,t,r,n,s)=>{if((r=u[e])&&(n=r.G))return s=n.document,0===t?n:1===t?s:2===t?s.documentElement:3===t?s.head:4===t?s.body:c.get(t)},m=(e,t)=>{e&&(c.set(t,e),a.set(e,t),g++,g>99999&&(c.forEach(((e,t)=>{e.nodeType&&!e.isConnected&&c.delete(t)})),g=0))};let g=0;const f=(e,t,r,o,i)=>{if(void 0!==t){if("string"==(o=typeof t)||"number"===o||"boolean"===o||null==t)return[9,t];if("function"===o)return[5];if(r=r||new Set,Array.isArray(t))return r.has(t)?[0,[]]:(r.add(t),[0,t.map((t=>f(e,t,r)))]);if("object"===o)return""===(i=n(t))?[8,{}]:"Window"===i?[6,{H:e,p:0}]:"HTMLCollection"===i||"NodeList"===i?[7,Array.from(t).map((t=>f(e,t,r)[1]))]:"Event"===i?[4,y(e,t,r)]:"CSSRuleList"===i?[3,Array.from(t).map(w)]:s(i,"CSS")&&i.endsWith("Rule")?[2,w(t)]:"CSSStyleDeclaration"===i?[8,y(e,t,r)]:"Attr"===i?[1,[t.name,t.value]]:t.nodeType?[6,{H:e,p:p(t),w:t.nodeName}]:[8,y(e,t,r,!0,!0)]}},y=(e,t,r,n,s,i,a,c)=>{if(i={},!r.has(t))for(a in r.add(t),t)o(a)&&(c=t[a],(n||"function"!=typeof c)&&(s||""!==c)&&(i[a]=f(e,c,r)));return i},w=e=>{let t,r={};for(t in e)T.includes(t)&&(r[t]=e[t]);return r},$=(e,t,r,n)=>{if(t){if(r=t[0],n=t[1],9===r)return n;if(10===r)return v(e,n);if(0===r)return n.map((t=>$(e,t)));if(6===r)return d(n.H,n.p);if(4===r)return b(S(e,n));if(8===r)return S(e,n)}},v=(e,{H:t,p:r,A:n})=>{let s=l.get(n);return s||(s=function(...s){const o={p:r,A:n,E:f(t,this),b:f(t,s)};e.postMessage([7,o])},l.set(n,s)),s},b=e=>new("detail"in e?CustomEvent:Event)(e.type,e),S=(e,t,r,n)=>{for(n in r={},t)r[n]=$(e,t[n]);return r},T="cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(","),E=async(e,t)=>{const n={v:t.v},s=r(t.D);for(let r=0;r<s;r++)try{let s,i,a=t.D[r],c=a.H,l=a.p,h=a.a;if(u[c]||await new Promise((e=>{let t=0,r=()=>{u[c]||t++>999?e():setTimeout(r,9)};r()})),1===h[0]&&h[1]in u[c].G){const t=new u[c].G[h[1]](...$(e,h[2]));m(t,l)}else s=d(c,l),s?(i=L(e,s,h,a.m),a.c&&m(i,a.c),"object"==typeof(o=i)&&o&&o.then&&(i=await i,n.r=!0),n.B=f(c,i)):n.k=l+" not found"}catch(e){r===s-1?n.k=String(e.stack||e):console.error(e)}var o;return n},L=(e,t,n,s)=>{let o,i,a,c,l=0,u=r(n);for(;l<u;l++){i=n[l],o=n[l+1],a=n[l-1];try{if(!Array.isArray(o))if("string"==typeof i||"number"==typeof i){if(l+1===u&&s){const e={};return s.map((r=>e[r]=t[r])),e}t=t[i]}else{if(0===o)return void(t[a]=$(e,i));"function"==typeof t[a]&&(c=$(e,i),"insertRule"===a&&c[1]>r(t.cssRules)&&(c[1]=r(t.cssRules)),t=t[a].apply(t,c))}}catch(e){console.warn(e)}}return t},I=(e,t,r)=>{if(!h.has(r)){h.set(r,t);const n=r.document,s=r.history,o={H:t,y:h.get(r.parent),F:n.baseURI},i=()=>e.postMessage([3,o]),a=s.pushState.bind(s),c=s.replaceState.bind(s),l=()=>setTimeout((()=>e.postMessage([11,t,n.baseURI])));s.pushState=(e,t,r)=>{a(e,t,r),l()},s.replaceState=(e,t,r)=>{c(e,t,r),l()},r.addEventListener("popstate",l),r.addEventListener("hashchange",l),u[t]={H:t,G:r},"complete"===n.readyState?i():r.addEventListener("load",i)}},N=(e,t)=>{let n,s,o=t.H,i=t.G,a=i.document,c=a.querySelector(\'script[type="text/partytown"]:not([data-ptid]):not([data-pterror]):not([async]):not([defer])\');c||(c=a.querySelector(\'script[type="text/partytown"]:not([data-ptid]):not([data-pterror])\')),c?(c.dataset.ptid=n=p(c,o),s={H:o,p:n},c.src?(s.F=c.src,s.x=c.dataset.ptsrc||c.src):s.f=c.innerHTML,e.postMessage([6,s])):t.q||(t.q=1,((e,t,n)=>{let s,o,i=n._ptf,a=(n.partytown||{}).forward||[],c=(r,n)=>e.postMessage([8,{H:t,l:r,b:f(t,Array.from(n))}]);if(n._ptf=void 0,a.map((e=>{o=n,e.split(".").map(((e,t,n)=>{o=o[n[t]]=t+1<r(n)?o[n[t]]||("push"===n[t+1]?[]:{}):(...e)=>c(n,e)}))})),i)for(s=0;s<r(i);s+=2)c(i[s],i[s+1])})(e,o,i),a.dispatchEvent(new CustomEvent("pt0")),e.postMessage([4,o]))},x=e=>{const r=e.document.implementation.createHTMLDocument(),n=r.createTextNode(""),s=r.createComment(""),o=r.createDocumentFragment(),i=r.createElement("i"),a=r.createElementNS("http://www.w3.org/2000/svg","svg"),c=r.createElement("canvas").getContext("2d"),l=new MutationObserver(t),u=new ResizeObserver(t),h=Object.getOwnPropertyNames(e).filter((e=>/^HTML.+Element$/.test(e))).map((e=>{const t=H(e);return[r.createElement(t)]})),p=[[e.history],[e.screen],[e.screen.orientation],[l,12],[u,12],[n],[s],[o],[i],[i.attributes],[i.classList],[i.dataset],[i.style],[a],[r],[r.doctype],[c],...h].filter((e=>e[0])).map((t=>{const r=t[0],n=t[1],s=r.constructor.name;return[s,e[s].prototype,r,n]})),d=[M("Window",e),M("Node",n)],m=e.partytown||{},g=(m.lib||"/~partytown/")+"",f={e:JSON.stringify(m,((e,t)=>("function"==typeof t&&(t=String(t)).startsWith(e+"(")&&(t="function "+t),t))),s:new URL(g,e.location)+"",o:d,t:A(e,"localStorage"),C:A(e,"sessionStorage")};return p.map((([e,t,r,n])=>O(d,e,t,r,n))),f},M=(e,t)=>{const r=[],n=[e,"Object",r];for(const e in t)C(r,t,e);return n},O=(e,t,r,n,s)=>{if("Object"!==t&&!e.some((e=>e[0]===t))){const o=Object.getPrototypeOf(r),i=o.constructor.name,a=[];O(e,i,o,n,s),Object.keys(Object.getOwnPropertyDescriptors(r)).map((e=>C(a,n,e))),e.push([t,i,a,s,n.nodeName])}},C=(t,r,s,i,a,c)=>{try{o(s)&&isNaN(s[0])&&("function"==(a=typeof(i=r[s]))?(String(i).includes("[native")||Object.getPrototypeOf(r)[s])&&t.push([s,5]):"object"===a&&null!=i?"Object"!==(c=n(i))&&e[c]&&t.push([s,i.nodeType||c]):"symbol"!==a&&(s.toUpperCase()===s?t.push([s,6,i]):t.push([s,6])))}catch(e){console.warn(e)}},R={Anchor:"A",DList:"DL",Image:"IMG",OList:"OL",Paragraph:"P",TableCaption:"CAPTION",TableCell:"TD",TableCol:"COLGROUP",TableRow:"TR",TableSection:"TBODY",UList:"UL"},H=e=>(e=e.substr(4).replace("Element",""),R[e]||e),A=(e,t)=>{let n,s=[],o=0,i=r(e[t]);for(;o<i;o++)n=e[t].key(o),s.push([n,e[t].getItem(n)]);return s};(async e=>{let t;const r=e.parent,n=await(async(e,r)=>{const n=e.navigator.serviceWorker,s=await n.getRegistration();return n.addEventListener("message",(e=>{return r=e.data,n=e=>s.active&&s.active.postMessage(e),E(t,r).then(n);var r,n})),s?(e,t,r)=>{0===r[0]?e.postMessage([1,x(t)]):((e,t,r)=>{const n=r[0];if(2===n)I(e,i(),t);else{const t=r[1],s=u[t];s&&(6===n?N(e,s):5===n&&((e,t,r,n,s)=>{(s=t.G.document.querySelector(`[data-ptid="${r}"]`))&&(n?s.dataset.pterror=n:s.type+="-x"),N(e,t)})(e,s,r[2],r[3]))}})(e,t,r)}:null})(e);n&&(t=new Worker(URL.createObjectURL(new Blob([\'/* Partytown 0.0.29 - MIT builder.io */\\n(e=>{const t=Symbol(),r=Symbol(),n=Symbol(),s=Symbol(),i=Symbol(),o=Symbol(),a=Symbol(),c=Symbol(),l=new Map,u={},h=new WeakMap,$={},d={},p={},g={},m=new Map,f=new Map,y="getClientRects,getBoundingClientRect".split(","),w="innerHeight,innerWidth,outerHeight,outerWidth,clientHeight,clientWidth,clientTop,clientLeft,scrollHeight,scrollWidth,scrollTop,scrollLeft,offsetHeight,offsetWidth,offsetTop,offsetLeft".split(","),I="childElementCount,children,firstElementChild,lastElementChild,nextElementSibling,previousElementSibling",v=()=>!0,S=e=>e.length,b=(e,t)=>Object.defineProperty(e,"name",{value:t}),E=[],T=()=>Math.round(9999999999*Math.random()+4),N="text/partytown",M=(e,t,r)=>Object.defineProperty(e,t,{...r,configurable:!0}),x=(e,t,r)=>M(e.prototype,t,r),L=(e,t)=>Object.defineProperties(e.prototype,t),C=(e,t,r)=>x(e,t,{value:r,writable:!0}),R=[];let W=0;const H=(e,n,s,o,a)=>{const c=e[r];if(R.push({H:e[t],p:c,a:[...e[i],...n],c:o,m:a}),!s)return P(!0);W=setTimeout(P,30)},P=e=>{if(clearTimeout(W),S(R)){const t=R[S(R)-1],r={v:T(),D:R.slice()};if(R.length=0,e){const e=((e,t)=>{const r=new XMLHttpRequest,n=e.s+"proxytown";return r.open("POST",n,!1),r.send(JSON.stringify(t)),JSON.parse(r.responseText)})(p,r),n=e.r,s=he(t.p,t.a,e.B);if(e.k){if(n)return Promise.reject(e.k);throw new Error(e.k)}return n?Promise.resolve(s):s}p.z([10,r])}},O=(e,t,r)=>{let n;return p.e.get&&(n=p.e.get(k(e,t)),n!==a)||(n=H(e,t,!1,void 0,r)),n},A=(e,t,r)=>{if(p.e.set){const n=p.e.set({value:r,prevent:c,...k(e,t)});if(n===c)return;n!==a&&(r=n)}const n=ue(e,r),s=[...t,n,0];H(e,s,!0)},D=(e,t,r,n)=>{let s;if(p.e.apply&&(s=p.e.apply({args:r,...k(e,t)}),s!==a))return s;const i=t[S(t)-1],o=j.includes(i),c=[...t,ue(e,r)];return s=H(e,c,o,n),o||y.includes(i)||m.clear(),s},k=(e,t)=>({name:t.join("."),continue:a,nodeName:e[n],constructor:e.constructor&&e.constructor.name}),j="addEventListener,removeEventListener,createElement,createTextNode,insertBefore,insertRule,deleteRule,setAttribute,setItem,removeItem,classList.add,classList.remove,classList.toggle".split(","),B=(e,t,r)=>{const n=e=>r.findIndex((t=>t[U]===e)),s={getItem(e){const t=n(e);return t>-1?r[t][F]:null},setItem(s,i){const o=n(s);o>-1?r[o][F]=i:r.push([s,i]),D(e,[t,"setItem"],[s,i])},removeItem(s){const i=n(s);i>-1&&r.splice(i,1),D(e,[t,"removeItem"],[s])},key(e){const t=r[e];return t?t[U]:null},clear(){r.length=0,D(e,[t,"clear"],E)},get length(){return r.length}};e[t]=s},U=0,F=1,_=(e,t,r,n)=>{let s=l.get(t);return s||(s=J(e,t,r,n),l.set(t,s)),s},J=(t,r,n,s)=>new($[n]?$[n]:n.includes("-")?$.UNKNOWN:e.HTMLElement)(t,r,[],n,s),q=(e,t)=>t in e[o],z=(e,t)=>e[o][t],X=(e,t,r)=>e[o][t]=r,G=(e,t,r,n)=>{let s="";try{e.g=t,V(e,r,e.u+"")}catch(e){console.error(r,e),s=String(e.stack||e)+""}return e.g=-1,s},V=(e,t,r)=>{t=t.replace(/\\\\/\\\\/# source/g,"//Xsource"),new Function(`with(this){${t}}\\\\n//# sourceURL=${r}`).apply(e.G)},Y=(e,t,r)=>{(r=z(e,t))&&setTimeout((()=>r.map((e=>e({type:t})))),undefined)},K=(e,t,r,n)=>{for(n=e.u;!n.host&&(n=(e=g[e.y]).u,e.H!==e.y););const s=new URL(t||"",n);if(!r&&p.e.resolveUrl){const e=p.e.resolveUrl(s,n);if(e)return e}return s},Q=(e,t,r)=>K(e,t,r)+"",Z=e=>K(oe(e),z(e,4)),ee=()=>`<script src=${JSON.stringify(p.s+"partytown.js")} async defer><\\\\/script>`,te=e=>class{constructor(){this.s="",this.l=[],this.e=[]}get src(){return this.s}set src(t){fetch(Q(e,t,!0),{mode:"no-cors",keepalive:!0}).then((e=>{e.ok||0===e.status?this.l.map((e=>e({type:"load"}))):this.e.map((e=>e({type:"error"})))}),(()=>this.e.forEach((e=>e({type:"error"})))))}addEventListener(e,t){"load"===e&&this.l.push(t),"error"===e&&this.e.push(t)}get onload(){return this.l[0]}set onload(e){this.l=[e]}get onerror(){return this.e[0]}set onerror(e){this.e=[e]}};class re extends URL{assign(){}reload(){}replace(){}}class ne{constructor(e,a,c,l,u){this[t]=e,this[r]=a,this[i]=c||[],this[n]=l,this[o]={},u&&(this[s]=u)}}class se extends ne{constructor(e,t,r,n){return super(e,t,r,n),new Proxy(this,{get:(e,t)=>O(e,[t]),set:(e,t,r)=>(A(e,[t],r),!0)})}}class Window extends ne{constructor(t,r,n){super(t,0);for(const t in e)if(!(t in this)&&"onmessage"!==t){const r=e[t];if(null!=r){const n="function"==typeof r&&!r.toString().startsWith("class");this[t]=n?r.bind(e):r}}Object.getOwnPropertyNames(e).map((t=>{t in this||(this[t]=e[t])}));for(const e in d)this[e]=b(class{constructor(...r){const n=new(0,d[e])(t,T()),s=ue(n,r);return H(n,[1,e,s]),n}},e);const s=new Proxy(this,{has:()=>!0});return g[t]={H:t,y:r,G:s,i:J(t,1,"#document"),j:J(t,2,"HTML"),n:J(t,3,"HEAD"),d:J(t,4,"BODY"),u:new re(n)},this.requestAnimationFrame=e=>setTimeout((()=>e(performance.now())),9),this.cancelAnimationFrame=e=>clearTimeout(e),this.requestIdleCallback=e=>{const t=Date.now();return setTimeout((()=>e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})),1)},this.cancelIdleCallback=e=>clearTimeout(e),B(this,"localStorage",p.t),B(this,"sessionStorage",p.C),M(this.performance,"timing",{get:()=>{const e=O(this,["performance","timing"]);return e?{...e,toJSON:()=>e}:void 0}}),s}get Audio(){return e=oe(this),class{constructor(t){const r=e.i.createElement("audio");return r.src=t,r}};var e}get body(){return oe(this).d}get document(){return oe(this).i}get documentElement(){return oe(this).j}fetch(e,t){return e="string"==typeof e||e instanceof URL?String(e):e.url,fetch(Q(oe(this),e),t)}get frameElement(){const e=oe(this),t=e.y,r=e.H;return r===t?null:_(t,r,"IFRAME")}get globalThis(){return this}get head(){return oe(this).n}get location(){return oe(this).u}set location(e){oe(this).u.href=e+""}get Image(){return te(oe(this))}get name(){const e=this[t];return name+e}get navigator(){return(t=>{const r=e.navigator;return r.sendBeacon=(e,r)=>{try{return fetch(Q(t,e,!0),{method:"POST",body:r,mode:"no-cors",keepalive:!0}),!0}catch(e){return console.error(e),!1}},r})(oe(this))}get origin(){return oe(this).u.origin}get parent(){return g[oe(this).y].G}get self(){return this}get top(){for(const e in g)if(g[e].H===g[e].y)return g[e].G}get window(){return this}}const ie=({H:e,y:t,F:r})=>{g[e]?g[e].u.href=r:new Window(e,t,r),p.z([6,e])},oe=e=>g[e[t]];class Node extends ne{appendChild(e){return this.insertBefore(e,null)}get href(){}set href(e){}insertBefore(e,s){const i=e[t]=this[t],o=e[r],a=e[n],c="SCRIPT"===a,l="IFRAME"===a;if(c){const t=z(e,3);if(t){const r=G(oe(e),o,t),n=r?"pterror":"ptid",s=r||o;A(e,["type"],N+"-x"),A(e,["dataset",n],s),A(e,["innerHTML"],t)}}return D(this,["insertBefore"],[e,s]),l&&(e=>{let t=0;const n=e[r],s=()=>{if(g[n]&&g[n].q){let t=z(e,1)?"error":"load",r=z(e,t);r&&r.map((e=>e({type:t})))}else if(t++>2e3){let t=z(e,"error");t&&t.map((e=>e({type:"error"}))),console.error("Timeout")}else setTimeout(s,9)};s()})(e),c&&(P(!0),p.z([6,i])),e}get nodeName(){return this[n]}get nodeType(){return 3}get ownerDocument(){return oe(this).i}}class ae{constructor(e){this.name=e[0],this.value=e[1]}get nodeName(){return this.name}get nodeType(){return 2}}class NodeList{constructor(e){(this._=e).map(((e,t)=>this[t]=e))}entries(){return this._.entries()}forEach(e,t){this._.map(e,t)}item(e){return this[e]}keys(){return this._.keys()}get length(){return S(this._)}values(){return this._.values()}[Symbol.iterator](){return this._[Symbol.iterator]()}}const ce=(e,n,s,i)=>{if(void 0!==s){let c=typeof s;if("string"===c||"boolean"===c||"number"===c||null==s)return[9,s];if("function"===c)return[10,{H:e,p:n,A:(o=s,(a=h.get(o))||(h.set(o,a=T()),u[a]=o),a)}];if(i=i||new Set,Array.isArray(s))return i.has(s)?[0,[]]:[0,s.map((t=>ce(e,n,t,i)))];if("object"===c)return"number"==typeof s[r]?[6,{H:s[t],p:s[r]}]:s instanceof Event?[4,le(e,n,s,!1,i)]:[8,le(e,n,s,!0,i)]}var o,a},le=(e,t,r,n,s,i,o,a)=>{if(i={},!s.has(r))for(o in s.add(r),r)a=r[o],(n||"function"!=typeof a)&&(i[o]=ce(e,t,a,s));return i},ue=(e,n)=>e?ce(e[t],e[r],n):[9,n],he=(e,t,r,n,s)=>{if(r){if(n=r[0],s=r[1],9===n||2===n||3===n)return s;if(10===n)return ge(t,s);if(6===n)return de(s);if(7===n)return new NodeList(s.map(de));if(1===n)return new ae(s);if(0===n)return s.map((r=>he(e,t,r)));if(4===n)return i=$e(e,t,s),new Proxy(new Event(i.type,i),{get:(e,t)=>t in i?i[t]:e[String(t)]});if(8===n)return $e(e,t,s)}var i},$e=(e,t,r,n,s)=>{for(s in n={},r)n[s]=he(e,[...t,s],r[s]);return n},de=({H:e,p:t,w:r})=>pe(e,t)||_(e,t,r),pe=(e,t)=>{const r=g[e];return 0===t?r.G:1===t?r.i:2===t?r.j:3===t?r.n:4===t?r.d:void 0},ge=(e,{H:t,p:r,w:n,A:s})=>(u[s]||h.set(u[s]=function(...s){const i=_(t,r,n);return D(i,e,s)},s),u[s]),me={sheet:{get(){return new fe(this)}}};class fe{constructor(e){this.ownerNode=e}get cssRules(){const e=this.ownerNode;return new Proxy({},{get(t,r){const n=String(r);return"item"===n?t=>we(e,t):"length"===n?ye(e).length:isNaN(n)?t[r]:we(e,n)}})}insertRule(e,t){const r=ye(this.ownerNode);return(t=void 0===t?0:t)>=0&&t<=r.length&&(D(this.ownerNode,["sheet","insertRule"],[e,t]),r.splice(t,0,0)),t}deleteRule(e){D(this.ownerNode,["sheet","deleteRule"],[e]),ye(this.ownerNode).splice(e,1)}}const ye=e=>{let t=z(e,2);return t||(t=O(e,["sheet","cssRules"]),X(e,2,t)),t},we=(e,t)=>{let r=ye(e);return 0===r[t]&&(r[t]=O(e,["sheet","cssRules",parseInt(t,10)])),r[t]},Ie={body:{get(){return oe(this).d}},createElement:{value(e){e=e.toUpperCase();const r=this[t],n=T(),s=_(r,n,e);return D(this,["createElement"],[e],n),"IFRAME"===e?(ie({H:n,y:r,F:"about:blank"}),A(s,["srcdoc"],ee())):"SCRIPT"===e&&A(s,["type"],N),s}},createElementNS:{value(e,r){r=r.toLowerCase();const n=this[t],s=T(),i=_(n,s,r,e);return D(this,["createElementNS"],[e,r],s),i}},createTextNode:{value(e){const r=this[t],n=T(),s=_(r,n,"#text");return D(this,["createTextNode"],[e],n),s}},createEvent:{value:e=>new Event(e)},currentScript:{get(){const e=this[t],r=oe(this).g;return r>0?_(e,r,"SCRIPT"):null}},defaultView:{get(){return oe(this).G}},documentElement:{get(){return oe(this).j}},getElementsByTagName:{value(e){return"BODY"===(e=e.toUpperCase())?[oe(this).d]:"HEAD"===e?[oe(this).n]:D(this,["getElementsByTagName"],[e])}},head:{get(){return oe(this).n}},implementation:{value:{hasFeature:v}},location:{get(){return oe(this).u},set(e){oe(this).u.href=e+""}},nodeType:{value:9},parentNode:{value:null},parentElement:{value:null},readyState:{value:"complete"}},ve={parentElement:{get(){return this.parentNode}},parentNode:{get(){return oe(this).j}}},Se={parentElement:{value:null},parentNode:{get(){return oe(this).i}}},be={localName:{get(){return this[n].toLowerCase()}},namespaceURI:{get(){return this[s]||"http://www.w3.org/1999/xhtml"}},nodeType:{value:1},tagName:{get(){return this[n]}}},Ee={hash:{get(){return Z(this).hash}},host:{get(){return Z(this).host}},hostname:{get(){return Z(this).hostname}},href:{get(){return Z(this).href},set(e){X(this,4,e+=""),A(this,["href"],e)}},origin:{get(){return Z(this).origin}},pathname:{get(){return Z(this).pathname}},port:{get(){return Z(this).port}},protocol:{get(){return Z(this).protocol}},search:{get(){return Z(this).search}}},Te={getContext:{value(...n){const s=["getContext",ue(this,n)];return new e.CanvasRenderingContext2D(this[t],this[r],s)}}},Ne={addEventListener:{value(...e){const t=e[0],r=z(this,t)||[];r.push(e[1]),X(this,t,r)}},async:{get:v,set:v},defer:{get:v,set:v},onload:{get(){let e=z(this,"load");return e&&e[0]||null},set(e){X(this,"load",e?[e]:null)}},onerror:{get(){let e=z(this,"error");return e&&e[0]||null},set(e){X(this,"error",e?[e]:null)}}},Me={contentDocument:{get(){return this.contentWindow.document}},contentWindow:{get(){const e=this[r];return g[e].G}},src:{get(){return z(this,4)||""},set(e){let t,r=new XMLHttpRequest;e=Q(oe(this),e),X(this,1,void 0),X(this,4,e),r.open("GET",e,!1),r.send(),t=r.status,t>199&&t<300?A(this,["srcdoc"],((e,t)=>`<base href="${e}">`+t.replace(/<script>/g,\\\'<script type="text/partytown">\\\').replace(/<script /g,\\\'<script type="text/partytown" \\\').replace(/text\\\\/javascript/g,N)+ee())(e,r.responseText)):X(this,1,t)}},...Ne},xe={get(){return z(this,3)||""},set(e){X(this,3,e)}},Le={innerHTML:xe,innerText:xe,src:{get(){return z(this,4)||""},set(e){const t=oe(this),r=Q(t,e,!0);e=Q(t,e),X(this,4,e),A(this,["src"],e),r!==e&&A(this,["dataset","ptsrc"],r)}},getAttribute:{value(e){return"src"===e?this.src:D(this,["getAttribute"],[e])}},setAttribute:{value(e,t){"src"===e?this.src=t:D(this,["setAttribute"],[e,t])}},textContent:xe,type:{get(){return O(this,["type"])},set(e){"text/javascript"!==e&&A(this,["type"],e)}},...Ne},Ce=([s,o,a,c,l])=>{const u=Re[s]?se:"Object"===o||"EventTarget"===o?ne:e[o],h=e[s]=b(e[s]||class extends u{},s);12===c&&(d[s]=h),l&&($[l]=h),a.map((([s,o,a])=>{s in h.prototype||s in u.prototype||("string"==typeof o?x(h,s,{get(){if(!q(this,s)){const a=this[t],c=this[r],l=[...this[i],s],u=this[n],h=e[o];X(this,s,new h(a,c,l,u))}return z(this,s)},set(e){X(this,s,e)}}):5===o?C(h,s,(function(...e){return D(this,[s],e)})):o>0&&(void 0!==a?C(h,s,a):x(h,s,{get(){return O(this,[s])},set(e){return A(this,[s],e)}})))}))},Re={CSSStyleDeclaration:1,DOMStringMap:1,NamedNodeMap:1},We=(e,t)=>C(e,"nodeType",t),He=(e,t)=>t.split(",").map((t=>x(e,t,{get(){let e=Pe(this,t),r=f.get(e);return r||(r=O(this,[t]),f.set(e,r)),r}}))),Pe=(e,n)=>e[t]+"."+e[r]+"."+n,Oe=(e,t)=>t.split(",").map((t=>x(e,t,{get(){return q(this,t)||X(this,t,O(this,[t])),z(this,t)},set(e){X(this,t,e)}}))),Ae=(e,t)=>Object.keys(t).map((r=>C(e,r,t[r]))),De=e=>w.map((t=>x(e,t,{get(){const e=m.get(Pe(this,t));if("number"==typeof e)return e;const r=O(this,[t],w);return r&&"object"==typeof r?(Object.entries(r).map((([e,t])=>{m.set(Pe(this,e),t)})),r[t]):r}}))),ke=e=>y.map((t=>{e.prototype[t]=function(){let e=Pe(this,t),r=m.get(e);return r||(r=D(this,[t],E),m.set(e,r)),r}})),je=[],Be=t=>{const r=t.data,n=r[0];p.q?6===n?(async t=>{let r,n=t.H,s=t.p,i=_(n,s,"SCRIPT"),o=t.f,a=t.F,c=t.x,l="",u=g[n];if(a)try{a=K(u,a)+"",X(i,4,a),r=await e.fetch(a),r.ok?(o=await r.text(),u.g=s,V(u,o,c||a),Y(i,"load")):(l=r.statusText,Y(i,"error"))}catch(e){l=String(e.stack||e)+"",Y(i,"error")}else o&&(l=G(u,s,o));u.g=-1,p.z([5,n,s,l])})(r[1]):7===n?(({p:e,A:t,E:r,b:n})=>{if(u[t])try{const s=he(e,[],r),i=he(e,[],n);u[t].apply(s,i)}catch(e){console.error(e)}})(r[1]):8===n?(({H:e,l:t,b:r})=>{try{let n=g[e].G,s=0,i=S(t);for(;s<i;s++)s+1<i?n=n[t[s]]:n[t[s]].apply(n,he(0,[],r))}catch(e){console.error(e)}})(r[1]):3===n?ie(r[1]):4===n?g[r[1]].q=1:11===n&&(g[r[1]].u.href=r[2]):1===n?((t=>{const r=p.e=JSON.parse(t.e);["resolveUrl","get","set","apply"].map((e=>{r[e]&&(r[e]=new Function("return "+r[e])())})),p.s=t.s,p.t=t.t,p.C=t.C,p.z=postMessage.bind(e),p.$sharedDataBuffer$=t.$sharedDataBuffer$,e.postMessage=e.importScripts=void 0,e.Node=Node,e.Window=Window,e.CSSStyleSheet=fe,t.o.map(Ce),(()=>{const t=e.Document,r=e.DocumentFragment,n=e.Element;"atob,btoa,crypto,indexedDB,performance,setTimeout,setInterval,clearTimeout,clearInterval".split(",").map((e=>delete Window.prototype[e])),L(n,be),L(t,Ie),L(e.HTMLAnchorElement,Ee),L(e.HTMLCanvasElement,Te),L(e.HTMLIFrameElement,Me),L(e.HTMLScriptElement,Le),L(e.HTMLStyleElement,me),L(e.HTMLHeadElement,ve),L(e.HTMLBodyElement,ve),L(e.HTMLHtmlElement,Se),Ae(fe,{type:"text/css"}),We(e.Comment,8),We(e.DocumentType,10),We(r,11),He(Node,"childNodes,firstChild,isConnected,lastChild,nextSibling,parentElement,parentNode,previousSibling"),He(n,I),He(r,I),De(n),De(Window),ke(n),Oe(t,"compatMode,referrer")})(),p.q=1})(r[1]),p.z([2]),je.slice().forEach(Be),je.length=0):je.push(t)};e.onmessage=Be,postMessage([0])})(self);\\n\'],{type:"text/javascript"})),{name:"Partytown 🎉"}),t.onmessage=e=>{const s=e.data;10===s[0]?E(t,s[1]):n(t,r,s)},r.addEventListener("pt1",(e=>{const r=e.detail,n=p(r.frameElement);I(t,n,r)})))})(e)})(window);\n</script></head></html>',
            false
          )
        )
      : o.endsWith('proxytown') &&
        n.respondWith(
          ((n, s) =>
            new Promise(async (o) => {
              const i = await n.clone().json(),
                a = await ((r) =>
                  new Promise(async (n) => {
                    const s = [...(await self.clients.matchAll())].sort(
                      (e, t) => (e.url > t.url ? -1 : e.url < t.url ? 1 : 0)
                    )[0]
                    if (s) {
                      const o = [
                        n,
                        setTimeout(() => {
                          e.delete(r.v), n(t(r, 'Timeout'))
                        }, 1e4),
                      ]
                      e.set(r.v, o), s.postMessage(r)
                    } else n(t(r, 'No Party'))
                  }))(i)
              o(r(JSON.stringify(a), s, 'application/json'))
            }))(s, false)
        )
  })
